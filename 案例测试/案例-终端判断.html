<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<a href="https://jackiehao.blog.csdn.net/article/details/115086631">CSDN文章</a>
		<p>当前终端：<span id="dyh">null</span></p>
		<p>是否微信内部打开：<span id="dyh1">null</span></p>
		<script type="text/javascript">
			var dyh = document.getElementById("dyh");
			var dyh1 = document.getElementById("dyh1");
			
			//终端判断
			function getQueryStringRegExp(name) {
				var reg = new RegExp("(^|\\?|&)" + name + "=([^&]*)(\\s|&|$)", "i");
				if (reg.test(location.href)) return unescape(RegExp.$2.replace(/\+/g, " "));
				return "";
			};

			if (/Android|webOS|iPhone|iPod|BlackBerry|opera mini|opera mobile/i.test(navigator.userAgent) &&
				getQueryStringRegExp('path') != 'www') {
				console.log("浏览器:", window.navigator, "终端:", window.navigator.userAgent, "匹配判断:",
					/Android|webOS|iPhone|iPod|BlackBerry|opera mini|opera mobile/i.test(navigator.userAgent) && getQueryStringRegExp(
						'path') != 'www', 2)
				// window.location = 'https://jackiehao.blog.csdn.net/';
			}

// ========================================================================
			//判断当前页面所在的环境是不是微信内置浏览器
			function isWeiXin() {
				var ua = window.navigator.userAgent.toLowerCase();
				if (ua.match(/MicroMessenger/i) == 'micromessenger') {
					return true;
				} else {
					return false;
				}
			}
			console.log("是否是微信内部浏览器:",isWeiXin());
			if(isWeiXin()){
				dyh1.innerText = "微信内部打开";
			}else{
				dyh1.innerText = "非微信内部打开";
			}
			
			//判断苹果、安卓、pc
			if (/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)) { //判断iPhone|iPad|iPod|iOS
				// window.location.href = "iPhone.html";
				dyh.innerText = "iPhone.html";
				console.log('iPhone.html');
			} else if (/(Android)/i.test(navigator.userAgent)) { //判断Android 
				// window.location.href = "Android.html";
				dyh.innerText = "Android.html";
				console.log('Android.html');
			} else { //pc
				// window.location.href = "pc.html";
				dyh.innerText = "pc.html";
				console.log('pc.html');
			};

			//正则表达式判断浏览器类型
			function userBrowser() {
				var browserName = navigator.userAgent.toLowerCase();
				if (/msie/i.test(browserName) && !/opera/.test(browserName)) {
					console.log("IE");
					return;
				}else if(/firefox/i.test(browserName)) {
					console.log("Firefox");
					return;
				}else if(/chrome/i.test(browserName) && /webkit/i.test(browserName) && /mozilla/i.test(browserName)) {
					console.log("Chrome");
					return;
				}else if(/opera/i.test(browserName)) {
					console.log("Opera");
					return;
				}else if(/webkit/i.test(browserName) && !(/chrome/i.test(browserName) && /webkit/i.test(browserName) && /mozilla/i.test(
					browserName))) {
					console.log("Safari");
					return;
				} else {
					console.log("unKnow");
				}
			}
			userBrowser();
		</script>
	</body>
</html>
